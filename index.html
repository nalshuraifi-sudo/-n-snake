<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>N-Snake</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background: #0a0f1d;
  color: white;
  font-family: sans-serif;
  text-align: center;
  direction: rtl;
}

.game-area {
  width: 330px;
  height: 330px;
  background: #00000040;
  border: 2px solid #00ff77;
  margin: 20px auto;
  position: relative;
}

.snake-button {
  width: 70px;
  height: 70px;
  background: linear-gradient(#1da1f2, #0d6efd);
  border-radius: 15px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 8px;
  font-size: 32px;
  cursor: pointer;
  user-select: none;
}

.controls {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.horizontal {
  display: flex;
  justify-content: center;
}
</style>
</head>

<body>

<h2 style="margin-top:20px;">نسخة مستقرة – التحكم يعمل 100%</h2>

<div class="game-area" id="game"></div>

<div class="controls">
  
  <div class="snake-button" onclick="handleButton('ArrowUp')">↑</div>

  <div class="horizontal">
    <div class="snake-button" onclick="handleButton('ArrowLeft')">←</div>
    <div class="snake-button" onclick="handleButton('ArrowRight')">→</div>
  </div>

  <div class="snake-button" onclick="handleButton('ArrowDown')">↓</div>

</div>

<script>
let snake = [{x: 10, y: 10}];
let direction = {x: 1, y: 0};  // التحرك يمين افتراضياً
let gridSize = 20;

function handleButton(key) {
  switch (key) {
    case "ArrowUp":
      if (direction.y === 1) return;
      direction = {x: 0, y: -1};
      break;

    case "ArrowDown":
      if (direction.y === -1) return;
      direction = {x: 0, y: 1};
      break;

    case "ArrowLeft":
      if (direction.x === 1) return;
      direction = {x: -1, y: 0};
      break;

    case "ArrowRight":
      if (direction.x === -1) return;
      direction = {x: 1, y: 0};
      break;
  }
}

function gameLoop() {
  let head = {...snake[0]};
  head.x += direction.x;
  head.y += direction.y;

  snake.unshift(head);
  snake.pop();

  draw();
}

function draw() {
  let game = document.getElementById("game");
  game.innerHTML = "";

  snake.forEach(p => {
    let el = document.createElement("div");
    el.style.position = "absolute";
    el.style.width = "15px";
    el.style.height = "15px";
    el.style.background = "#22ff55";
    el.style.left = (p.x * 15) + "px";
    el.style.top = (p.y * 15) + "px";
    game.appendChild(el);
  });
}

setInterval(gameLoop, 160);
</script>

</body>
</html>
